/* --- Fonts --- */
@font-face {
	font-family: "Geist Mono";
	src: url("/fonts/GeistMono.woff2") format("woff2-variations");
	font-weight: 100 900;
	font-style: normal;
	font-display: swap;
}
@font-face {
	font-family: "Plaster";
	src: url("/fonts/Plaster.woff2") format("woff2");
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

/* --- TailwindCSS --- */
@import "tailwindcss";

@plugin "@iconify/tailwind4" {
	scale: 1.2;
}

@custom-variant dark (&:where(.dark, .dark *));

/* --- Semantic Retro Theme Variables --- */
:root {
	--base: #fafafa;
	--content: #171717;
	--border: #171717;
	--primary: #171717;
	--primary-content: #fafafa;
	--accent: #10b981;
	--accent-content: #fafafa;

	/* Retro Palettes */
	--t-green: #10b981;
	--t-amber: #f59e0b;
	--t-cyan: #06b6d4;
	--t-magenta: #d946ef;
	--t-blue: #3b82f6;
	--t-red: #ef4444;
}

.dark {
	--base: #0a0a0a;
	--content: #e5e5e5;
	--border: #404040;
	--primary: #fafafa;
	--primary-content: #0a0a0a;
}

@theme {
	--font-display: "Plaster", system-ui;
	--font-mono: "Geist Mono", monospace;
	--color-base: var(--base);
	--color-content: var(--content);
	--color-border: var(--border);
	--color-primary: var(--primary);
	--color-primary-content: var(--primary-content);
	--color-accent: var(--accent);
	--color-accent-content: var(--accent-content);
	--color-t-green: var(--t-green);
	--color-t-amber: var(--t-amber);
	--color-t-cyan: var(--t-cyan);
	--color-t-magenta: var(--t-magenta);
	--color-t-blue: var(--t-blue);
	--color-t-red: var(--t-red);
}

@layer base {
	html {
		@apply bg-base text-content scroll-smooth font-mono;
	}
	body {
		@apply relative w-full overflow-x-hidden pt-16 antialiased;
		min-height: 100dvh;
	}

	/* Global CRT Overlay */
	body::before {
		content: " ";
		@apply pointer-events-none fixed inset-0 z-[999] opacity-[0.02] dark:opacity-[0.04];
		background:
			linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
			linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
		background-size:
			100% 2px,
			3px 100%;
	}

	/* Core Typography */
	h1, h2, h3, h4 { @apply font-black uppercase tracking-tighter; }
	.font-display { @apply font-display uppercase tracking-tighter; }
	p { @apply leading-relaxed; }
	::selection {
		@apply bg-accent text-accent-content;
	}
	* {
		border-radius: 0 !important;
	}
}

@layer components {
	/* WINDOW SYSTEM */
	.tui-window {
		@apply border-border bg-base relative w-full border-2 p-1 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)] transition-all duration-300 dark:shadow-[4px_4px_0px_0px_rgba(255,255,255,0.05)];
	}
	.tui-window:hover {
		@apply -translate-y-0.5 shadow-[6px_6px_0px_0px_rgba(0,0,0,0.15)] dark:shadow-[6px_6px_0px_0px_rgba(255,255,255,0.08)];
	}

	.tui-window-header {
		@apply bg-primary text-primary-content mb-1 flex items-center justify-between px-2 py-0.5 text-[9px] font-bold uppercase md:text-xs;
	}

	/* BUTTON SYSTEM */
	.tui-btn-primary {
		@apply bg-primary text-primary-content hover:text-content border-border inline-flex items-center justify-center border-2 px-8 py-3 text-xs font-black uppercase transition-all hover:bg-transparent active:translate-x-0.5 active:translate-y-0.5 disabled:opacity-50 md:text-sm;
	}
	.tui-btn-secondary {
		@apply text-content hover:bg-primary hover:text-primary-content border-border inline-flex items-center justify-center border-2 bg-transparent px-8 py-3 text-xs font-black uppercase transition-all active:translate-x-0.5 active:translate-y-0.5 disabled:opacity-50 md:text-sm;
	}
	.tui-btn-ghost {
		@apply hover:border-border hover:bg-primary/5 border-2 border-transparent px-4 py-1 text-[10px] font-bold uppercase transition-all;
	}

	/* PANEL SYSTEM */
	.tui-panel {
		@apply border-border relative w-full border-2 p-6 md:p-10;
	}
	.tui-panel::after {
		content: "";
		@apply border-accent/30 absolute -right-1 -bottom-1 size-4 border-r-2 border-b-2;
	}

	.tui-panel-muted {
		@apply border-border/10 bg-primary/5;
	}
	.tui-panel-accent {
		@apply border-l-accent border-l-4;
	}

	/* MODAL/OVERLAY SYSTEM (Hierarchical Z-Index) */
	.tui-overlay {
		@apply bg-base/95 fixed inset-0 z-[100] flex items-center justify-center p-0 backdrop-blur-sm md:p-4;
	}
	.tui-modal {
		@apply border-border bg-base h-full w-full border-2 p-1 shadow-[16px_16px_0px_0px_rgba(0,0,0,0.1)] md:h-auto md:max-w-2xl;
	}

	/* COMMAND PALETTE INPUT */
	.tui-palette-input {
		@apply text-accent placeholder:text-content/20 w-full border-none bg-transparent py-2 text-lg font-bold outline-none;
	}

	/* SCROLL UTILITIES */
	.no-scrollbar {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}
	.no-scrollbar::-webkit-scrollbar {
		display: none;
	}

	.tui-status-dot {
		@apply size-1.5 animate-pulse rounded-full;
	}
}

@utility animate-blink {
	animation: blink 1s step-end infinite;
}
@utility animate-shake {
	animation: shake 0.3s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

@keyframes shake {
	10%,
	90% {
		transform: translate3d(-1px, 0, 0);
	}
	20%,
	80% {
		transform: translate3d(2px, 0, 0);
	}
	30%,
	50%,
	70% {
		transform: translate3d(-4px, 0, 0);
	}
	40%,
	60% {
		transform: translate3d(4px, 0, 0);
	}
}

@keyframes blink {
	0%,
	100% {
		opacity: 1;
	}
	50% {
		opacity: 0;
	}
}
