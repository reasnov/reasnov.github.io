---
const { currentLocale, url } = Astro;
const locales = ["en", "id"];
const localeNames: Record<string, string> = {
	en: "EN",
	id: "ID",
};

/**
 * Generates the URL for the same page in a different locale.
 * It replaces the first segment of the path if it's a locale.
 */
function getLocaleUrl(targetLocale: string) {
	const pathname = url.pathname;
	const parts = pathname.split("/").filter(Boolean);

	if (parts.length > 0 && locales.includes(parts[0])) {
		parts[0] = targetLocale;
	} else {
		parts.unshift(targetLocale);
	}

	return "/" + parts.join("/") + (pathname.endsWith("/") ? "/" : "");
}
---

<div class="flex items-center gap-2 text-xs font-bold uppercase">
	{
		locales.map((locale) => (
			<a
				href={getLocaleUrl(locale)}
				class={`px-2 py-1 transition-colors ${
					currentLocale === locale
						? "bg-white text-black pointer-events-none"
						: "text-neutral-500 hover:text-white"
				}`}
			>
				{localeNames[locale]}
			</a>
		))
	}
</div>
