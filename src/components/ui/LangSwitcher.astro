---
const { currentLocale, url } = Astro;
const locales = ["en", "id"];
const localeNames: Record<string, string> = {
	en: "EN",
	id: "ID",
};

function getLocaleUrl(targetLocale: string) {
	const pathname = url.pathname;
	const parts = pathname.split("/").filter(Boolean);

	if (parts.length > 0 && locales.includes(parts[0])) {
		parts[0] = targetLocale;
	} else {
		parts.unshift(targetLocale);
	}

	return "/" + parts.join("/") + (pathname.endsWith("/") ? "/" : "");
}
---

<div class="flex items-center gap-1 text-[10px] font-bold">
	{
		locales.map((locale, index) => (
			<>
				<a
					href={getLocaleUrl(locale)}
					class={`uppercase transition-colors ${
						currentLocale === locale
							? "text-primary pointer-events-none"
							: "text-neutral-500 hover:text-black dark:hover:text-white"
					}`}
				>
					{localeNames[locale]}
				</a>
				{index < locales.length - 1 && <span class="text-neutral-300 dark:text-neutral-800">/</span>}
			</>
		))
	}
</div>
