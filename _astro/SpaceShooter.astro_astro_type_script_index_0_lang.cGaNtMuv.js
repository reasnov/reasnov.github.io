import{s as v}from"./Sound.DFoBsO9C.js";const d=document.getElementById("game-splash"),i=document.getElementById("game-container"),a=document.getElementById("entities-group"),p=document.getElementById("stars-group"),b=document.getElementById("start-btn"),k=document.getElementById("skip-game"),g=document.getElementById("game-score"),y=document.getElementById("score-bar");let h=!1,m=0;const f=10;let s={x:0,y:0,el:null,vx:0},l=[],c=[],u={},r={left:!1,right:!1,shoot:!1},x=0;function E(){d&&(d.classList.add("opacity-0"),h=!1,document.body.style.overflow="",setTimeout(()=>{d.classList.add("hidden"),d.classList.remove("opacity-0")},500))}k?.addEventListener("click",E);window.addEventListener("keydown",e=>{e.key==="Escape"&&d&&!d.classList.contains("hidden")&&E()});function M(){if(!(!p||!i)){p.innerHTML="";for(let e=0;e<80;e++){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttribute("r",(Math.random()*1.2).toString()),n.setAttribute("cx",Math.random()*100+"%"),n.setAttribute("cy",Math.random()*100+"%"),n.setAttribute("fill","white"),n.setAttribute("opacity",(Math.random()*.4).toString()),p.appendChild(n)}}}function T(){i&&(i.classList.add("animate-shake"),setTimeout(()=>i.classList.remove("animate-shake"),300))}function N(e,n){const t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx",e.toString()),t.setAttribute("cy",n.toString()),t.setAttribute("r","2"),t.setAttribute("fill","var(--t-amber)"),t.setAttribute("class","animate-ping"),a?.appendChild(t),setTimeout(()=>t.remove(),500)}function L(){if(!h||!i)return;const e=i.clientWidth,n=i.clientHeight;if(u.ArrowLeft||r.left?s.vx=-7:u.ArrowRight||r.right?s.vx=7:s.vx*=.85,u[" "]||r.shoot){const t=Date.now();if(t-x>180){const o=document.createElementNS("http://www.w3.org/2000/svg","use");o.setAttributeNS("http://www.w3.org/1999/xlink","href","#svg-bullet"),a?.appendChild(o),c.push({x:s.x,y:s.y-25,el:o}),x=t,v.playLaser()}}if(s.x=Math.max(25,Math.min(e-25,s.x+s.vx)),s.el?.setAttribute("transform",`translate(${s.x}, ${s.y})`),c.forEach((t,o)=>{t.y-=12,t.el.setAttribute("transform",`translate(${t.x}, ${t.y})`),t.y<-20&&(t.el.remove(),c.splice(o,1))}),l.forEach((t,o)=>{t.y+=t.s,t.el.setAttribute("transform",`translate(${t.x}, ${t.y})`),c.forEach((w,B)=>{Math.hypot(t.x-w.x,t.y-w.y)<20&&(m++,g&&(g.textContent=`OPTIMIZATION_SCORE: ${m.toString().padStart(2,"0")}/${f}`),y&&(y.style.width=m/f*100+"%"),N(t.x,t.y),T(),v.playExplosion(),t.el.remove(),l.splice(o,1),w.el.remove(),c.splice(B,1),m>=f&&(h=!1,document.getElementById("victory-screen")?.classList.remove("hidden"),setTimeout(E,2e3)))}),t.y>n+30&&(t.el.remove(),l.splice(o,1))}),Math.random()<.04&&l.length<6){const t=document.createElementNS("http://www.w3.org/2000/svg","use");t.setAttributeNS("http://www.w3.org/1999/xlink","href","#svg-enemy"),t.setAttribute("class","text-white/20"),a?.appendChild(t),l.push({x:Math.random()*e,y:-30,el:t,s:2+Math.random()*3})}requestAnimationFrame(L)}b?.addEventListener("click",()=>{document.getElementById("start-screen")?.classList.add("hidden"),h=!0,v.playBoot();const e=document.createElementNS("http://www.w3.org/2000/svg","use");e.setAttributeNS("http://www.w3.org/1999/xlink","href","#svg-player"),e.setAttribute("class","text-white"),a&&(a.innerHTML=""),a?.appendChild(e),s.el=e,s.x=(i?.clientWidth||400)/2,s.y=(i?.clientHeight||500)-60,M(),L(),"ontouchstart"in window&&document.getElementById("mobile-controls")?.classList.remove("hidden")});window.addEventListener("keydown",e=>u[e.key]=!0);window.addEventListener("keyup",e=>u[e.key]=!1);window.addEventListener("trigger-game-reset",()=>{m=0,g&&(g.textContent=`OPTIMIZATION_SCORE: 00/${f}`),y&&(y.style.width="0%"),document.getElementById("start-screen")?.classList.remove("hidden"),document.getElementById("victory-screen")?.classList.add("hidden"),h=!1,a&&(a.innerHTML=""),c=[],l=[]});const A=document.getElementById("m-left"),I=document.getElementById("m-right"),S=document.getElementById("m-shoot");A?.addEventListener("touchstart",e=>{e.preventDefault(),r.left=!0});A?.addEventListener("touchend",()=>r.left=!1);I?.addEventListener("touchstart",e=>{e.preventDefault(),r.right=!0});I?.addEventListener("touchend",()=>r.right=!1);S?.addEventListener("touchstart",e=>{e.preventDefault(),r.shoot=!0});S?.addEventListener("touchend",()=>r.shoot=!1);
